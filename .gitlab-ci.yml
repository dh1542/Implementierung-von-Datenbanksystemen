variables:
  # Feel free to choose the image that suits you best.
  # blang/latex:latest ... Former image used in this template. No longer maintained by author.
  # listx/texlive:2020 ... The default, referring to TexLive 2020. Current at least to 2021-02-02.

  # Additional alternatives with high Docker pull counts:
  # thomasweise/docker-texlive-full
  # thomasweise/texlive
  # adnrv/texlive
  LATEX_IMAGE: thomasweise/docker-texlive-full
  PYTHON_IMAGE: python:3.6.6

stages:
  - build
  - badges

build_blaetter:
  stage: build
  image: $LATEX_IMAGE
  script:
    - make UBlaetter_ci
  artifacts:
    paths:
      - "Blaetter"

build_folien:
  stage: build
  image: $LATEX_IMAGE
  script:
    - make UFolien_ci
  artifacts:
    paths:
      - "Folien"

badges:
  stage: badges
  image: $PYTHON_IMAGE
  only:
    refs:
      - main
  script:
    - pip install anybadge
    - anybadge -l "Bl√§tter" -p " Hier herunterladen (Commit " -s ") " -v $CI_COMMIT_SHORT_SHA -f blaetter.svg -c lightgrey
    - anybadge -l "Folien" -p " Hier herunterladen (Commit " -s ") " -v $CI_COMMIT_SHORT_SHA -f folien.svg -c lightgrey
  artifacts:
    paths:
        - blaetter.svg
        - folien.svg
